/*---------------------------PROCEDIMIENTOS ALMACENADOS BASICOS----------------------------------------*/
USE `PROYECTO_DAUTE`;
DROP procedure IF EXISTS `SP_INSERT_USUARIO`;
DELIMITER $$
USE `PROYECTO_DAUTE`$$
CREATE PROCEDURE `SP_INSERT_USUARIO` (
	IN NICK VARCHAR(500),
    IN EMAIL VARCHAR(500),
    IN FOTO VARCHAR(1500),
    IN PASS VARCHAR(500),
    IN ROL INT,
    IN TYPE_SUSCRIP INT,
    IN GENERO VARCHAR(100)
)
BEGIN
	INSERT INTO USUARIO VALUES (NULL,NICK,FOTO,EMAIL,PASS,ROL,TYPE_SUSCRIP,GENERO,CURDATE(),NULL);
END$$
DELIMITER ;

USE `PROYECTO_DAUTE`;
DROP procedure IF EXISTS `SP_UPDATE_USUARIO`;
DELIMITER $$
USE `PROYECTO_DAUTE`$$
CREATE PROCEDURE `SP_UPDATE_USUARIO` (
	IN S_NICK VARCHAR(500),
    IN S_EMAIL VARCHAR(500),
    IN S_FOTO VARCHAR(1500),
    IN S_PASS VARCHAR(500),
    IN S_ROL INT,
    IN S_TYPE_SUSCRIP INT,
    IN S_GENERO VARCHAR(100),
    IN S_CODIGO INT
)
BEGIN
	UPDATE USUARIO 
			SET 
				NICKNAME = S_NICK,
                FOTO = S_FOTO,
				EMAIL = S_EMAIL,
				PASS = S_PASS,
				ROL_ID = S_ROL,
				TIPO_SUSCRIPCION = S_TYPE_SUSCRIP,
				GENERO = S_GENERO,
                UPDATE_AT = CURDATE()
			WHERE
				ID = S_CODIGO;
END$$
DELIMITER ;

USE `PROYECTO_DAUTE`;
DROP procedure IF EXISTS `SP_INSERT_PRODUCTO`;
DELIMITER $$
USE `PROYECTO_DAUTE`$$
CREATE PROCEDURE `SP_INSERT_PRODUCTO` (
    IN S_NOMBRE VARCHAR(500),
    IN S_DESCRIPCION VARCHAR(2500),					
    IN S_PRECIO DOUBLE,
    IN S_ESTADO INT, 							
    IN S_STOK INT, 					
    IN S_FOTO VARCHAR(5000),
    IN S_CATEGORIA_ID INT
)
BEGIN
	INSERT INTO PRODUCTOS VALUES (NULL,S_NOMBRE,S_DESCRIPCION,S_PRECIO,S_ESTADO,0,S_STOK,S_FOTO,CURDATE(),NULL,S_CATEGORIA_ID);
END$$
DELIMITER ;

USE `PROYECTO_DAUTE`;
DROP procedure IF EXISTS `SP_UPDATE_PRODUCTO`;
DELIMITER $$
USE `PROYECTO_DAUTE`$$
CREATE PROCEDURE `SP_UPDATE_PRODUCTO` (
	IN S_ID INT,
    IN S_NOMBRE VARCHAR(500),
    IN S_DESCRIPCION VARCHAR(2500),					
    IN S_PRECIO DOUBLE,
    IN S_ESTADO INT, 							
    IN S_STOK INT, 					
    IN S_FOTO VARCHAR(5000),
    IN S_CATEGORIA_ID INT
)
BEGIN
		UPDATE PRODUCTOS
			SET 
			NOMBRE = S_NOMBRE,
			DESCRIPCION = S_DESCRIPCION,
			PRECIO = S_PRECIO,
            ESTADO = S_ESTADO,
			STOK = S_STOK,
			FOTO = S_FOTO,
			CATEGORIA_ID = S_CATEGORIA_ID,
			UPDATE_AT = CURDATE()
		WHERE
			ID = S_ID;
END$$
DELIMITER ;

USE `PROYECTO_DAUTE`;
DROP procedure IF EXISTS `SP_INSERT_DIRECCION`;
DELIMITER $$
USE `PROYECTO_DAUTE`$$
CREATE PROCEDURE `SP_INSERT_DIRECCION` (
    IN S_USUARIO_ID INT,
    IN S_DEPARTAMENTO_ID INT,
    IN S_MUNICIPIO VARCHAR(1500),
    IN S_CALLE VARCHAR(1500),
    IN S_LUGAR_REFERENCIAS VARCHAR(1500),
    IN S_TELEFONO VARCHAR(250),
    IN S_TELEFONO_EXTRA VARCHAR(250)
)
BEGIN
	INSERT INTO DIRECCION VALUES(NULL,S_USUARIO_ID,S_DEPARTAMENTO_ID,S_MUNICIPIO,S_CALLE,S_LUGAR_REFERENCIAS,S_TELEFONO,S_TELEFONO_EXTRA);
END$$
DELIMITER ;

USE `PROYECTO_DAUTE`;
DROP procedure IF EXISTS `SP_UPDATE_DIRECCION`;
DELIMITER $$
USE `PROYECTO_DAUTE`$$
CREATE PROCEDURE `SP_UPDATE_DIRECCION` (
    IN S_USUARIO_ID INT,
    IN S_DEPARTAMENTO_ID INT,
    IN S_MUNICIPIO VARCHAR(1500),
    IN S_CALLE VARCHAR(1500),
    IN S_LUGAR_REFERENCIAS VARCHAR(1500),
    IN S_TELEFONO VARCHAR(250),
    IN S_TELEFONO_EXTRA VARCHAR(250)
)
BEGIN
	UPDATE DIRECCION 
		SET 
			DEPARTAMENTO_ID = S_DEPARTAMENTO_ID,
			MUNICIPIO = S_MUNICIPIO,
			CALLE =S_CALLE,
			LUGAR_REFERENCIAS =S_LUGAR_REFERENCIAS,
			TELEFONO =S_TELEFONO,
			TELEFONO_EXTRA =S_TELEFONO_EXTRA
		WHERE
			USUARIO_ID = S_USUARIO_ID;
END$$
DELIMITER ;